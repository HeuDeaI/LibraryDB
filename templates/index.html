<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Library Management System</title>
    <script>
        async function fetchBooks() {
            try {
                const response = await fetch('/books');
                if (!response.ok) {
                    throw new Error('Failed to fetch books');
                }
                const books = await response.json();
                renderBooks(books);
            } catch (error) {
                console.error('Error fetching books:', error);
                document.getElementById('books-list').innerHTML = `<p>Error loading books.</p>`;
            }
        }

        function renderBooks(books) {
            const tableBody = books.map(book => `
                <tr>
                    <td>${book.book_id}</td>
                    <td>${book.title}</td>
                    <td>${book.publication_year}</td>
                    <td>${book.genre}</td>
                </tr>
            `).join('');
            document.getElementById('books-list').innerHTML = `
                <table border="1">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Title</th>
                            <th>Publication Year</th>
                            <th>Genre</th>
                        </tr>
                    </thead>
                    <tbody>${tableBody}</tbody>
                </table>
            `;
        }

        document.addEventListener('DOMContentLoaded', fetchBooks);
    </script>
</head>
<body>
    <h1>Library Management System</h1>
    <div>
        <button onclick="window.location.href='/authors'">Authors</button>
        <button onclick="window.location.href='/readers'">Readers</button>
        <button onclick="window.location.href='/book-authors'">Book Authors</button>
        <button onclick="window.location.href='/loans'">Loans</button>
    </div>
    <h2>Books</h2>
    <div id="books-list">Loading...</div>
</body>
</html>
